"use strict";const mainList=document.querySelector(".js_mainList");let drinks=[];const searchText=document.querySelector(".js_searchText"),searchButton=document.querySelector(".js_searchButton");let favorites=[];const favoriteList=document.querySelector(".js_favoriteList"),favoriteDrinkList=JSON.parse(localStorage.getItem("favoriteDrinkList"));function handleClickSearchButton(e){e.preventDefault();const t=searchText.value;fetch("https://www.thecocktaildb.com/api/json/v2/1/search.php?s="+t).then(e=>e.json()).then(e=>{drinks=e.drinks,renderDrinksHtml()})}function addRemoveDrinkToFavorites(){const e=event.currentTarget.id,t=drinks.find(t=>t.idDrink===e),r=favorites.findIndex(t=>t.idDrink===e);-1===r?favorites.push(t):favorites.splice(r,1)}function handleClickRenderedDrinks(e){addRemoveDrinkToFavorites(),localStorage.setItem("favoriteDrinkList",JSON.stringify(favorites)),renderDrinksHtml(),renderFavoritesHtml(favorites)}function listenersRenderedDrinks(){const e=document.querySelectorAll(".js_drinks");for(const t of e)t.addEventListener("click",handleClickRenderedDrinks)}function handleClickDeleteFavorites(e){const t=e.currentTarget.id;console.log(e.currentTarget.id);const r=favorites.findIndex(e=>e.idDrink===t);console.log(r),-1!==r&&favorites.splice(r,1),renderFavoritesHtml(favorites)}function listenersDeleteFavoritesButton(){const e=document.querySelectorAll(".js_deleteFavorite");for(const t of e)t.addEventListener("click",handleClickDeleteFavorites)}function renderDrinksHtml(e){let t="";for(const e of drinks){let r="";r=-1!==favorites.findIndex(t=>t.idDrink===e.idDrink)?"drink--favorite":"",t+=`<li class="drink js_drinks ${r}" id=${e.idDrink}>`,""===e.strDrinkThumb?t+=` <img src='https://via.placeholder.com/210x295/ffffff/666666/?text=img' alt='${e.strDrink}' />`:t+=` <img src='${e.strDrinkThumb}/preview' alt='${e.strDrink}' />`,t+=` <h3>${e.strDrink}</h3>`,t+="</li>"}mainList.innerHTML=t,listenersRenderedDrinks()}function renderFavoritesHtml(e){let t="";for(const r of e)t+=`<li class="favorite js_favorite" id=${r.idDrink}>`,""===r.strDrinkThumb?t+=`  <img src='https://via.placeholder.com/210x295/ffffff/666666/?text=img' alt='${r.strDrink}' />`:t+=`  <img src='${r.strDrinkThumb}/preview' alt='${r.strDrink}' />`,t+=`  <h3>${r.strDrink}</h3>`,t+=`  <button class="deleteFavorite js_deleteFavorite" id=${r.idDrink}><i class="fa-solid fa-circle-xmark"></i></button>`,t+="</li>";favoriteList.innerHTML=t,listenersDeleteFavoritesButton()}searchButton.addEventListener("click",handleClickSearchButton),null!==favoriteDrinkList&&(favorites=favoriteDrinkList,renderFavoritesHtml(favoriteDrinkList));