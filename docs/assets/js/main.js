"use strict";const mainList=document.querySelector(".js_mainList");let drinks=[];const searchText=document.querySelector(".js_searchText"),searchButton=document.querySelector(".js_searchButton");let favorites=[];const favoriteList=document.querySelector(".js_favoriteList"),resetSearch=document.querySelector(".js_reset"),favoriteDrinkList=JSON.parse(localStorage.getItem("favoriteDrinkList")),mainContainer=document.querySelector(".main");function validateInputValue(e){if(""===e){const e=document.createElement("h2");e.classList.add("header__title");const t=document.createTextNode("No has introducido ningÃºn cocktel para buscar");e.appendChild(t),mainContainer.appendChild(e)}else getFromServer(e)}function getFromServer(e){fetch("https://www.thecocktaildb.com/api/json/v2/1/search.php?s="+e).then(e=>e.json()).then(e=>{if(0===e.drinks.length){const e=document.createElement("h2");e.classList.add("header__title");const t=document.createTextNode("El cocktel que estas buscando, no se encuentra entre nuestras sugerencias. Prueba con otro cocktel por favor.");e.appendChild(t),mainContainer.appendChild(e)}else drinks=e.drinks.map(e=>({idDrink:e.idDrink,strDrink:e.strDrink,strDrinkThumb:e.strDrinkThumb,strTags:e.strTags})),renderDrinksHtml()}).catch(e=>{const t=document.createElement("h2");t.classList.add("header__title");const r=document.createTextNode("Ha ocurrido un error, prueba de nuevo");t.appendChild(r),mainContainer.appendChild(t),console.log(e)})}function addRemoveDrinkToFavorites(e){const t=e.currentTarget.id,r=drinks.find(e=>e.idDrink===t),i=favorites.findIndex(e=>e.idDrink===t);-1===i?favorites.push(r):favorites.splice(i,1)}function renderDrinksHtml(){let e="";console.log(drinks);for(const t of drinks){let r="";r=-1!==favorites.findIndex(e=>e.idDrink===t.idDrink)?"drink--favorite":"",e+=`<li class="drink js_drinks ${r}" id=${t.idDrink}>`,""===t.strDrinkThumb?e+=` <img src='https://via.placeholder.com/210x295/ffffff/666666/?text=img' alt='${t.strDrink}' />`:e+=` <img src='${t.strDrinkThumb}/preview' class="drink__image" alt='${t.strDrink}' />`,e+=` <h3 class="drink__title">${t.strDrink}</h3>`,e+="</li>"}mainList.innerHTML=e,listenersRenderedDrinks()}function renderFavoritesHtml(e){let t="";for(const r of e)t+=`<li class="favorite js_favorite" id=${r.idDrink}>`,""===r.strDrinkThumb?t+=`  <img src='https://via.placeholder.com/210x295/ffffff/666666/?text=img' class="favorite__image" alt='${r.strDrink}' />`:t+=`  <img src='${r.strDrinkThumb}/preview' class="favorite__image" alt='${r.strDrink}' />`,t+=`  <h3 class="favorite__title">${r.strDrink}</h3>`,t+=`  <button class="deleteFavorite js_deleteFavorite deleteFavorite__icon" id=${r.idDrink}><i class="fa-solid fa-circle-xmark"></i></button>`,t+="</li>";favoriteList.innerHTML=t,listenersDeleteFavoritesButton()}function deleteAllFavorites(){const e=favoriteList.parentElement,t=document.createElement("button"),r=document.createTextNode("Borar todos los favoritos");t.appendChild(r),t.classList.add("resetFavorites"),e.appendChild(t),t.addEventListener("click",(function(e){e.preventDefault(),favorites=[],localStorage.removeItem("favoriteDrinkList"),renderDrinksHtml(),renderFavoritesHtml(favorites)}))}function handleClickSearchButton(e){e.preventDefault();validateInputValue(searchText.value.toLowerCase())}function handleClickRenderedDrinks(e){addRemoveDrinkToFavorites(e),localStorage.setItem("favoriteDrinkList",JSON.stringify(favorites)),renderDrinksHtml(),renderFavoritesHtml(favorites)}function handleClickDeleteFavorites(e){const t=e.currentTarget.id,r=favorites.findIndex(e=>e.idDrink===t);-1!==r&&favorites.splice(r,1),renderFavoritesHtml(favorites),renderDrinksHtml()}function handleClickResetSearch(e){e.preventDeafult(),searchText.value="",renderDrinksHtml()}function listenersRenderedDrinks(){const e=document.querySelectorAll(".js_drinks");for(const t of e)t.addEventListener("click",handleClickRenderedDrinks)}function listenersDeleteFavoritesButton(){const e=document.querySelectorAll(".js_deleteFavorite");for(const t of e)t.addEventListener("click",handleClickDeleteFavorites)}null!==favoriteDrinkList&&(favorites=favoriteDrinkList,renderFavoritesHtml(favoriteDrinkList)),deleteAllFavorites(),searchButton.addEventListener("click",handleClickSearchButton),resetSearch.addEventListener("click",handleClickResetSearch);